<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/ClientSide/Thymeleaf.html to edit this template
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Shopping Cart | McProject</title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <!--使用本地端伺服器資源-->
        <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" href="../static/css/bootstrap.min.css"/>
        <link rel="stylesheet" th:href="@{/css/shoppingcart_style.css}" href="../static/css/shoppingcart_style.css"/>
    </head>
    <body style="background-color: #f3f5f9;">
        <div id="header" class="header">
            <div class="logo-mark">
                <a href="#" th:href="@{/menu}">
                    <img src="../static/func_img/logo.png" th:src="@{/func_img/logo.png}" alt="logo" style="max-width: 15%; height: auto;"/>    
                </a>

            </div>
            <div class="identity">
                <span th:if="${session.user != null}" th:text="${session.user.userName}">user name</span>                
            </div> 
        </div>   

        <div id="container" class="container" > 
            <div id="empty" class="empty" th:if="${session.orderLines == null}">
                <div style="margin-top: 50px; font-size: 25px; color: silver">
                    お客様のカートに商品はありません。
                </div>
                <div style="margin-top: 50px;">
                    <img src="../static/func_img/empty_cart.png" th:src="@{/func_img/empty_cart.png}" alt="empty"/>
                </div>
                <div style="margin-top: 50px;">
                    <a class="btn btn-default" style="width:160px; margin-right: 50px; color:orange; border-color: orange" href="#" th:href="@{/menu}"> メニュートップへ </a>

                    <a class="btn btn-default" style="width:160px; margin-left: 50px" href="#" th:href="@{/orders/status}"> 配送状況を確認 </a>
                </div>
            </div> <!-- end of empty content -->

            <div id="cart" class="cart" th:if="${session.orderLines != null}">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>產品名稱</th>
                            <th>數量</th>
                            <th>總價</th>
                            <th>附餐</th>
                            <th>#</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="orderLine : ${session.orderLines}">
                            <td th:text="${orderLine.product.name}"></td>
                            <td th:text="*{orderLine.amount}"></td>
                            <td th:text="*{orderLine.purchasePrice}"></td>
                            <td>
                                可能要判斷selection 為null 的情況 
                                <div th:each="selec : ${orderLine.selection}">
                                    加個標註之類的 
                                    <span th:text="${selec}">text</span>
                                </div>

                            </td>
                            <td>
                                <a class="btn btn-danger" href="#" th:href="@{/menu/{id}/remove(id=${orderLine.id})}">X</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <p>
                    <a class="btn btn-primary" href="#" th:href="@{/orders/submit}" th:if="${session.orderLines != null}">結帳</a>
                    <a class="btn btn-primary" href="#" th:href="@{/menu}">繼續購物</a>
                </p>
            </div>  <!-- End of cart -->                         
        </div> <!-- end of container -->
        
        <div id="footer" class="footer" th:if="${session.orderLines == null}">
            <div class="container">
                <div class="row">
                    <div class="column">
                        <ul>
                            <li>
                                <div class="title">
                                    瀏覽菜單
                                </div>
                            </li>
                            <li>
                                <a href="#">
                                    快樂分享餐
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    超值全餐和主菜單點
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    配餐單點
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    飲料
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    點心與拼盤
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="column">
                        <ul>
                            <li>
                                <div class="title">
                                    支援
                                </div>
                            </li>
                            <li>
                                <a href="#">
                                    使用條款
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    隱私權保護聲明
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    常見問題
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    飲養資訊
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    政府規範產品標示
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="column">
                        <ul>
                            <li>
                                <div class="title">
                                    了解更多
                                </div>
                            </li>
                            <li>
                                <a href="#">
                                    麥當勞官方網站
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    麥當勞官方粉絲團
                                </a>
                            </li>                           
                        </ul>
                    </div>      
                </div> <!-- End of row -->        
                <div>　マックドナルドテスト </div>
            </div> <!-- End of footer container -->   
        </div> <!-- End of footer -->

        <div id="product-link" class="product-link" th:if="${session.orderLines != null}">

        </div>

        <!--使用本地端伺服器資源-->
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script th:src="@{/js/bootstrap.min.js}" src="../static/js/bootstrap.min.js"></script>
        <script>
            /* product link adjust */
            $(window).on('resize load', function () {
                let cartHeight = $('#cart').height();
                let marginAdjust = 600 - cartHeight + 200;
                if (cartHeight <= 600) {
                    $('#product-link').css('margin-top', marginAdjust);
                } else {

                }
            }); // end of function

            /* footer adjust */
            $(window).on('resize load', function () {
                let windowHeight = $(window).height();
                let headerHeight = $('#header').height();
                let containerHeight = $('#container').height();
                let footerHeight = $('#footer').height();
                if (windowHeight <= 1000) {
                    $('#footer').css('position', 'static');
                    $('#footer').css('margin-top', 1000 - headerHeight - containerHeight - footerHeight);
                } else {
                    $('#footer').css('position', 'fixed');
                    $('#footer').css('margin-top', '');
                }
            }); // end of function

        </script>
    </body>
</html>
